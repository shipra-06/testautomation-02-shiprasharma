{"remainingRequest":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\src\\views\\Client.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\src\\views\\Client.vue","mtime":1617789068378},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCB7IGNoZWNrTG9nZ2VkSW4sIGdldENsaWVudCwgY3JlYXRlQ2xpZW50LCBlZGl0Q2xpZW50LCBkZWxldGVDbGllbnQgfSBmcm9tICdAL3NlcnZpY2VzL2FwaScKaW1wb3J0IHsgdmFsaWRhdGVFbWFpbCB9IGZyb20gJ0Avc2VydmljZXMvdmFsaWRhdGUnCmltcG9ydCBMb2FkaW5nIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZScKaW1wb3J0IENoZWNrQm94IGZyb20gJ0AvY29tcG9uZW50cy9DaGVja0JveC52dWUnCgoKCkBDb21wb25lbnQoewoJY29tcG9uZW50czogeyBMb2FkaW5nLCBDaGVja0JveCB9Cn0pCmV4cG9ydCBkZWZhdWx0IGNsYXNzIENsaWVudCBleHRlbmRzIFZ1ZSB7CglwdWJsaWMgbG9hZGluZzogYm9vbGVhbiA9IGZhbHNlCglwdWJsaWMgc2F2aW5nOiBib29sZWFuID0gZmFsc2UKCXB1YmxpYyBkZWxldGluZzogYm9vbGVhbiA9IGZhbHNlCglwdWJsaWMgY2xpZW50ID0gbnVsbAoJcHVibGljIGVycm9yczogc3RyaW5nW10gPSBbXQoJcHVibGljIGRpcnR5OiBib29sZWFuID0gZmFsc2UKCglwcml2YXRlIGFzeW5jIGNyZWF0ZWQoKSB7CgkJaWYgKGNoZWNrTG9nZ2VkSW4oKSkgewoJCQlpZiAodGhpcy5tb2RlID09PSAnY3JlYXRlJykgewoJCQkJdGhpcy5jbGllbnQgPSB7fQoJCQl9IGVsc2UgewoJCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZQoJCQkJdGhpcy5jbGllbnQgPSBhd2FpdCBnZXRDbGllbnQodGhpcy4kcm91dGUucGFyYW1zLmlkKQoJCQkJdGhpcy5sb2FkaW5nID0gZmFsc2UKCQkJfQoJCX0KCX0KCglwdWJsaWMgZ2V0IG1vZGUoKSB7CgkJcmV0dXJuIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCA9PT0gJ25ldycgPyAnY3JlYXRlJyA6ICdlZGl0JwoJfQoKCXByaXZhdGUgdmFsaWF0ZSgpIHsKCQl0aGlzLmVycm9ycyA9IFtdCgoJCWlmICghdGhpcy5jbGllbnQubmFtZSB8fCB0aGlzLmNsaWVudC5uYW1lLmxlbmd0aCA9PT0gMCkgewoJCQl0aGlzLmVycm9ycy5wdXNoKCdOYW1lIG11c3QgYmUgc2V0JykKCQl9IGVsc2UgaWYgKHRoaXMuY2xpZW50Lm5hbWUubGVuZ3RoID4gNTApIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnTmFtZSBjYW4gbm90IGJlIGxvbmdlciB0aGFuIDUwIGNoYXJhY3RlcnMnKQoJCX0KCgkJaWYgKCF0aGlzLmNsaWVudC5lbWFpbCB8fCB0aGlzLmNsaWVudC5lbWFpbC5sZW5ndGggPT09IDApIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnRW1haWwgbXVzdCBiZSBzZXQnKQoJCX0gZWxzZSBpZiAodGhpcy5jbGllbnQubmFtZS5sZW5ndGggPiAyMDApIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnRW1haWwgY2FuIG5vdCBiZSBsb25nZXIgdGhhbiAyMDAgY2hhcmFjdGVycycpCgkJfSBlbHNlIGlmICghdmFsaWRhdGVFbWFpbCh0aGlzLmNsaWVudC5lbWFpbCkpIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnRW1haWwgYWRkcmVzcyBpcyBub3QgdmFsaWQnKQoJCX0KCgkJaWYgKCF0aGlzLmNsaWVudC50ZWxlcGhvbmUgfHwgdGhpcy5jbGllbnQudGVsZXBob25lLmxlbmd0aCA9PT0gMCkgewoJCQl0aGlzLmVycm9ycy5wdXNoKCdUZWxlcGhvbmUgbXVzdCBiZSBzZXQnKQoJCX0gZWxzZSBpZiAodGhpcy5jbGllbnQubmFtZS5sZW5ndGggPiA1MCkgewoJCQl0aGlzLmVycm9ycy5wdXNoKCdUZWxlcGhvbmUgY2FuIG5vdCBiZSBsb25nZXIgdGhhbiA1MCBjaGFyYWN0ZXJzJykKCQl9CgoJCXJldHVybiB0aGlzLmVycm9ycy5sZW5ndGggPT09IDAKCX0KCglAV2F0Y2goJ2NsaWVudCcsIHsgZGVlcDogdHJ1ZSB9KQoJcHJpdmF0ZSBjbGVhckVycm9ycygpIHsKCQlpZiAodGhpcy5kaXJ0eSkgewoJCQl0aGlzLnZhbGlhdGUoKQoJCX0KCX0KCglwdWJsaWMgYXN5bmMgc2F2ZSgpIHsKCQl0aGlzLmRpcnR5ID0gdHJ1ZQoJCWlmICghdGhpcy52YWxpYXRlKCkpIHsKCQkJcmV0dXJuIGZhbHNlCgkJfQoJCXRoaXMuc2F2aW5nID0gdHJ1ZQoJCWlmICh0aGlzLm1vZGUgPT09ICdjcmVhdGUnKSB7CgkJCXRoaXMuY2xpZW50ID0gYXdhaXQgY3JlYXRlQ2xpZW50KHRoaXMuY2xpZW50KQoJCX0gZWxzZSB7CgkJCXRoaXMuY2xpZW50ID0gYXdhaXQgZWRpdENsaWVudCh0aGlzLmNsaWVudC5pZCwgdGhpcy5jbGllbnQpCgkJfQoJCXRoaXMuJHJvdXRlci5wdXNoKCcvY2xpZW50cycpCgl9CgoJcHVibGljIGFzeW5jIHJlbW92ZSgpIHsKCQl0aGlzLmRlbGV0aW5nID0gdHJ1ZQoJCWF3YWl0IGRlbGV0ZUNsaWVudCh0aGlzLmNsaWVudC5pZCkKCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2NsaWVudHMnKQoJfQoKfQo="},{"version":3,"sources":["Client.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"Client.vue","sourceRoot":"src/views","sourcesContent":["<script lang=\"ts\">\r\n\timport { Component, Vue, Watch } from 'vue-property-decorator'\r\n\timport { checkLoggedIn, getClient, createClient, editClient, deleteClient } from '@/services/api'\r\n\timport { validateEmail } from '@/services/validate'\r\n\timport Loading from '@/components/Loading.vue'\r\n\timport CheckBox from '@/components/CheckBox.vue'\r\n\r\n\t\r\n\r\n\t@Component({\r\n\t\tcomponents: { Loading, CheckBox }\r\n\t})\r\n\texport default class Client extends Vue {\r\n\t\tpublic loading: boolean = false\r\n\t\tpublic saving: boolean = false\r\n\t\tpublic deleting: boolean = false\r\n\t\tpublic client = null\r\n\t\tpublic errors: string[] = []\r\n\t\tpublic dirty: boolean = false\r\n\r\n\t\tprivate async created() {\r\n\t\t\tif (checkLoggedIn()) {\r\n\t\t\t\tif (this.mode === 'create') {\r\n\t\t\t\t\tthis.client = {}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\tthis.client = await getClient(this.$route.params.id)\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get mode() {\r\n\t\t\treturn this.$route.params.id === 'new' ? 'create' : 'edit'\r\n\t\t}\r\n\r\n\t\tprivate valiate() {\r\n\t\t\tthis.errors = []\r\n\r\n\t\t\tif (!this.client.name || this.client.name.length === 0) {\r\n\t\t\t\tthis.errors.push('Name must be set')\r\n\t\t\t} else if (this.client.name.length > 50) {\r\n\t\t\t\tthis.errors.push('Name can not be longer than 50 characters')\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.client.email || this.client.email.length === 0) {\r\n\t\t\t\tthis.errors.push('Email must be set')\r\n\t\t\t} else if (this.client.name.length > 200) {\r\n\t\t\t\tthis.errors.push('Email can not be longer than 200 characters')\r\n\t\t\t} else if (!validateEmail(this.client.email)) {\r\n\t\t\t\tthis.errors.push('Email address is not valid')\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.client.telephone || this.client.telephone.length === 0) {\r\n\t\t\t\tthis.errors.push('Telephone must be set')\r\n\t\t\t} else if (this.client.name.length > 50) {\r\n\t\t\t\tthis.errors.push('Telephone can not be longer than 50 characters')\r\n\t\t\t}\r\n\r\n\t\t\treturn this.errors.length === 0\r\n\t\t}\r\n\r\n\t\t@Watch('client', { deep: true })\r\n\t\tprivate clearErrors() {\r\n\t\t\tif (this.dirty) {\r\n\t\t\t\tthis.valiate()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic async save() {\r\n\t\t\tthis.dirty = true\r\n\t\t\tif (!this.valiate()) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tthis.saving = true\r\n\t\t\tif (this.mode === 'create') {\r\n\t\t\t\tthis.client = await createClient(this.client)\r\n\t\t\t} else {\r\n\t\t\t\tthis.client = await editClient(this.client.id, this.client)\r\n\t\t\t}\r\n\t\t\tthis.$router.push('/clients')\r\n\t\t}\r\n\r\n\t\tpublic async remove() {\r\n\t\t\tthis.deleting = true\r\n\t\t\tawait deleteClient(this.client.id)\r\n\t\t\tthis.$router.push('/clients')\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"container\">\r\n\t\t<h2>\r\n\t\t\t<div v-if=\"mode === 'create'\">New Client</div>\r\n\t\t\t<div v-if=\"mode === 'edit'\">Client: {{ $route.params.id }}</div>\r\n\t\t\t<a v-if=\"mode === 'edit'\" class=\"btn red\" @click=\"remove\">{{ deleting ? '...' : 'Delete' }}</a>\r\n\t\t</h2>\r\n\t\t<Loading v-if=\"loading\" />\r\n\t\t<div v-if=\"!loading\">\r\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\r\n\t\t\t\t<label>ID</label>\r\n\t\t\t\t<input type=\"text\" disabled :value=\"client.id\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\r\n\t\t\t\t<label>Created</label>\r\n\t\t\t\t<input type=\"text\" disabled :value=\"client.created\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Name</label>\r\n\t\t\t\t<input type=\"text\" v-model=\"client.name\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Email</label>\r\n\t\t\t\t<input type=\"email\" v-model=\"client.email\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Telephone</label>\r\n\t\t\t\t<input type=\"text\" v-model=\"client.telephone\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"error\" v-for=\"(error, i) in errors\" :key=\"i\">{{ error }}</div>\r\n\t\t<div class=\"actions\">\r\n\t\t\t<router-link class=\"btn\" to=\"/clients\">Back</router-link>\r\n\t\t\t<a class=\"btn blue\" @click=\"save\">{{ saving ? '...' : 'Save' }}</a>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n\th2 {\r\n\t\tposition: relative;\r\n\t\ta {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tright: 0;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n</style>\r\n"]}]}