{"remainingRequest":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\src\\views\\Bill.vue?vue&type=style&index=0&id=249a4276&lang=scss&scoped=true&","dependencies":[{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\src\\views\\Bill.vue","mtime":1617789068378},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgpoMiB7Cglwb3NpdGlvbjogcmVsYXRpdmU7CglhIHsKCQlwb3NpdGlvbjogYWJzb2x1dGU7CgkJdG9wOiAwOwoJCXJpZ2h0OiAwOwoJfQp9Ci5hY3Rpb25zIHsKCWRpc3BsYXk6IGZsZXg7CglqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47Cn0K"},{"version":3,"sources":["Bill.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Bill.vue","sourceRoot":"src/views","sourcesContent":["<script lang=\"ts\">\r\n\timport { Component, Vue, Watch } from 'vue-property-decorator'\r\n\timport { checkLoggedIn, getBill, createBill, editBill, deleteBill } from '@/services/api'\r\n\timport Loading from '@/components/Loading.vue'\r\n\timport CheckBox from '@/components/CheckBox.vue'\r\n\r\n\t@Component({\r\n\t\tcomponents: { Loading, CheckBox }\r\n\t})\r\n\texport default class Bill extends Vue {\r\n\t\tpublic loading: boolean = false\r\n\t\tpublic saving: boolean = false\r\n\t\tpublic deleting: boolean = false\r\n\t\tpublic bill = null\r\n\t\tpublic errors: string[] = []\r\n\t\tpublic dirty: boolean = false\r\n\r\n\t\tprivate async created() {\r\n\t\t\tif (checkLoggedIn()) {\r\n\t\t\t\tif (this.mode === 'create') {\r\n\t\t\t\t\tthis.bill = {}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\tthis.bill = await getBill(this.$route.params.id)\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get mode() {\r\n\t\t\treturn this.$route.params.id === 'new' ? 'create' : 'edit'\r\n\t\t}\r\n\r\n\t\tprivate valiate() {\r\n\t\t\tthis.errors = []\r\n\t\t\tif (this.bill.value >= 1000000000) {\r\n\t\t\t\tthis.errors.push('Value must be less than 1000000000')\r\n\t\t\t} else if (this.bill.value <= 0) {\r\n\t\t\t\tthis.errors.push('Value must be greater than 0')\r\n\t\t\t} else if (parseFloat(this.bill.value) % 1 !== 0) {\r\n\t\t\t\tthis.errors.push('Value must be a whole number')\r\n\t\t\t}\r\n\t\t\treturn this.errors.length === 0\r\n\t\t}\r\n\r\n\t\t@Watch('bill', { deep: true })\r\n\t\tprivate clearErrors() {\r\n\t\t\tif (this.dirty) {\r\n\t\t\t\tthis.valiate()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic async save() {\r\n\t\t\tthis.dirty = true\r\n\t\t\tif (!this.valiate()) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tthis.saving = true\r\n\t\t\tif (this.mode === 'create') {\r\n\t\t\t\tthis.bill = await createBill(this.bill)\r\n\t\t\t} else {\r\n\t\t\t\tthis.bill = await editBill(this.bill.id, this.bill)\r\n\t\t\t}\r\n\t\t\tthis.$router.push('/bills')\r\n\t\t}\r\n\r\n\t\tpublic async remove() {\r\n\t\t\tthis.deleting = true\r\n\t\t\tawait deleteBill(this.bill.id)\r\n\t\t\tthis.$router.push('/bills')\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"container\">\r\n\t\t<h2>\r\n\t\t\t<div v-if=\"mode === 'create'\">New Bill</div>\r\n\t\t\t<div v-if=\"mode === 'edit'\">Bill: {{ $route.params.id }}</div>\r\n\t\t\t<a v-if=\"mode === 'edit'\" class=\"btn red\" @click=\"remove\">{{ deleting ? '...' : 'Delete' }}</a>\r\n\t\t</h2>\r\n\t\t<Loading v-if=\"loading\" />\r\n\t\t<div v-if=\"!loading\">\r\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\r\n\t\t\t\t<label>ID</label>\r\n\t\t\t\t<input type=\"text\" disabled :value=\"bill.id\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\r\n\t\t\t\t<label>Created</label>\r\n\t\t\t\t<input type=\"text\" disabled :value=\"bill.created\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Value (SEK)</label>\r\n\t\t\t\t<input type=\"number\" v-model=\"bill.value\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Paid</label>\r\n\t\t\t\t<CheckBox v-model=\"bill.paid\" />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"error\" v-for=\"(error, i) in errors\" :key=\"i\">{{ error }}</div>\r\n\t\t<div class=\"actions\">\r\n\t\t\t<router-link class=\"btn\" to=\"/bills\">Back</router-link>\r\n\t\t\t<a class=\"btn blue\" @click=\"save\">{{ saving ? '...' : 'Save' }}</a>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n\th2 {\r\n\t\tposition: relative;\r\n\t\ta {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tright: 0;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n</style>\r\n"]}]}