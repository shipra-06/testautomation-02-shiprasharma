{"remainingRequest":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\src\\views\\Room.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\src\\views\\Room.vue","mtime":1617789068381},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\course\\02-pass-shiprasharma\\rasi10-hotel-test-vue\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCB7IGNoZWNrTG9nZ2VkSW4sIGdldFJvb20sIGNyZWF0ZVJvb20sIGVkaXRSb29tLCBkZWxldGVSb29tIH0gZnJvbSAnQC9zZXJ2aWNlcy9hcGknCmltcG9ydCBMb2FkaW5nIGZyb20gJ0AvY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZScKaW1wb3J0IENoZWNrQm94IGZyb20gJ0AvY29tcG9uZW50cy9DaGVja0JveC52dWUnCmltcG9ydCB7IFJvb21DYXRlZ29yeSwgUm9vbUZlYXR1cmUgfSBmcm9tICdAL3R5cGVzJwoKQENvbXBvbmVudCh7Cgljb21wb25lbnRzOiB7IExvYWRpbmcsIENoZWNrQm94IH0KfSkKZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9vbUNvbXBvbmVudCBleHRlbmRzIFZ1ZSB7CglwdWJsaWMgbG9hZGluZzogYm9vbGVhbiA9IGZhbHNlCglwdWJsaWMgc2F2aW5nOiBib29sZWFuID0gZmFsc2UKCXB1YmxpYyBkZWxldGluZzogYm9vbGVhbiA9IGZhbHNlCglwdWJsaWMgcm9vbTogYW55ID0gbnVsbAoJcHVibGljIGVycm9yczogc3RyaW5nW10gPSBbXQoJcHVibGljIGRpcnR5OiBib29sZWFuID0gZmFsc2UKCglwdWJsaWMgY2F0ZWdvcmllcyA9IFJvb21DYXRlZ29yeQoJcHVibGljIGZlYXR1cmVzID0gUm9vbUZlYXR1cmUKCglwcml2YXRlIGFzeW5jIGNyZWF0ZWQoKSB7CgkJaWYgKGNoZWNrTG9nZ2VkSW4oKSkgewoJCQlpZiAodGhpcy5tb2RlID09PSAnY3JlYXRlJykgewoJCQkJdGhpcy5yb29tID0gewoJCQkJCWZlYXR1cmVzOiBbXQoJCQkJfQoJCQl9IGVsc2UgewoJCQkJdGhpcy5sb2FkaW5nID0gdHJ1ZQoJCQkJdGhpcy5yb29tID0gYXdhaXQgZ2V0Um9vbSh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCgkJCQl0aGlzLmxvYWRpbmcgPSBmYWxzZQoJCQl9CgkJfQoJfQoKCXB1YmxpYyBnZXQgbW9kZSgpIHsKCQlyZXR1cm4gdGhpcy4kcm91dGUucGFyYW1zLmlkID09PSAnbmV3JyA/ICdjcmVhdGUnIDogJ2VkaXQnCgl9CgoJcHJpdmF0ZSB2YWxpYXRlKCkgewoJCXRoaXMuZXJyb3JzID0gW10KCgkJaWYgKHR5cGVvZiB0aGlzLnJvb20ubnVtYmVyID09PSAndW5kZWZpbmVkJykgewoJCQl0aGlzLmVycm9ycy5wdXNoKCdSb29tIG51bWJlciBtdXN0IGJlIHNldCcpCgkJfQoKCQlpZiAodHlwZW9mIHRoaXMucm9vbS5mbG9vciA9PT0gJ3VuZGVmaW5lZCcpIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnRmxvb3IgbXVzdCBiZSBzZXQnKQoJCX0KCgkJaWYgKHRoaXMucm9vbS5wcmljZSA+PSAxMDAwMDAwMDAwKSB7CgkJCXRoaXMuZXJyb3JzLnB1c2goJ1ByaWNlIG11c3QgYmUgbGVzcyB0aGFuIDEwMDAwMDAwMDAnKQoJCX0gZWxzZSBpZiAodGhpcy5yb29tLnByaWNlIDw9IDApIHsKCQkJdGhpcy5lcnJvcnMucHVzaCgnUHJpY2UgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCcpCgkJfSBlbHNlIGlmIChwYXJzZUZsb2F0KHRoaXMucm9vbS5wcmljZSkgJSAxICE9PSAwKSB7CgkJCXRoaXMuZXJyb3JzLnB1c2goJ1ByaWNlIG11c3QgYmUgYSB3aG9sZSBudW1iZXInKQoJCX0KCgkJcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMAoJfQoKCUBXYXRjaCgncm9vbScsIHsgZGVlcDogdHJ1ZSB9KQoJcHJpdmF0ZSBjbGVhckVycm9ycygpIHsKCQlpZiAodGhpcy5kaXJ0eSkgewoJCQl0aGlzLnZhbGlhdGUoKQoJCX0KCX0KCXB1YmxpYyBhc3luYyBzYXZlKCkgewoJCXRoaXMuZGlydHkgPSB0cnVlCgkJaWYgKCF0aGlzLnZhbGlhdGUoKSkgewoJCQlyZXR1cm4gZmFsc2UKCQl9CgkJdGhpcy5zYXZpbmcgPSB0cnVlCgkJaWYgKHRoaXMubW9kZSA9PT0gJ2NyZWF0ZScpIHsKCQkJdGhpcy5yb29tID0gYXdhaXQgY3JlYXRlUm9vbSh0aGlzLnJvb20pCgkJfSBlbHNlIHsKCQkJdGhpcy5yb29tID0gYXdhaXQgZWRpdFJvb20odGhpcy5yb29tLmlkLCB0aGlzLnJvb20pCgkJfQoJCXRoaXMuJHJvdXRlci5wdXNoKCcvcm9vbXMnKQoJfQoKCXB1YmxpYyBhc3luYyByZW1vdmUoKSB7CgkJdGhpcy5kZWxldGluZyA9IHRydWUKCQlhd2FpdCBkZWxldGVSb29tKHRoaXMucm9vbS5pZCkKCQl0aGlzLiRyb3V0ZXIucHVzaCgnL3Jvb21zJykKCX0KCn0K"},{"version":3,"sources":["Room.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"Room.vue","sourceRoot":"src/views","sourcesContent":["<script lang=\"ts\">\r\n\timport { Component, Vue, Watch } from 'vue-property-decorator'\r\n\timport { checkLoggedIn, getRoom, createRoom, editRoom, deleteRoom } from '@/services/api'\r\n\timport Loading from '@/components/Loading.vue'\r\n\timport CheckBox from '@/components/CheckBox.vue'\r\n\timport { RoomCategory, RoomFeature } from '@/types'\r\n\r\n\t@Component({\r\n\t\tcomponents: { Loading, CheckBox }\r\n\t})\r\n\texport default class RoomComponent extends Vue {\r\n\t\tpublic loading: boolean = false\r\n\t\tpublic saving: boolean = false\r\n\t\tpublic deleting: boolean = false\r\n\t\tpublic room: any = null\r\n\t\tpublic errors: string[] = []\r\n\t\tpublic dirty: boolean = false\r\n\r\n\t\tpublic categories = RoomCategory\r\n\t\tpublic features = RoomFeature\r\n\r\n\t\tprivate async created() {\r\n\t\t\tif (checkLoggedIn()) {\r\n\t\t\t\tif (this.mode === 'create') {\r\n\t\t\t\t\tthis.room = {\r\n\t\t\t\t\t\tfeatures: []\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.loading = true\r\n\t\t\t\t\tthis.room = await getRoom(this.$route.params.id)\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpublic get mode() {\r\n\t\t\treturn this.$route.params.id === 'new' ? 'create' : 'edit'\r\n\t\t}\r\n\r\n\t\tprivate valiate() {\r\n\t\t\tthis.errors = []\r\n\r\n\t\t\tif (typeof this.room.number === 'undefined') {\r\n\t\t\t\tthis.errors.push('Room number must be set')\r\n\t\t\t}\r\n\r\n\t\t\tif (typeof this.room.floor === 'undefined') {\r\n\t\t\t\tthis.errors.push('Floor must be set')\r\n\t\t\t}\r\n\r\n\t\t\tif (this.room.price >= 1000000000) {\r\n\t\t\t\tthis.errors.push('Price must be less than 1000000000')\r\n\t\t\t} else if (this.room.price <= 0) {\r\n\t\t\t\tthis.errors.push('Price must be greater than 0')\r\n\t\t\t} else if (parseFloat(this.room.price) % 1 !== 0) {\r\n\t\t\t\tthis.errors.push('Price must be a whole number')\r\n\t\t\t}\r\n\r\n\t\t\treturn this.errors.length === 0\r\n\t\t}\r\n\r\n\t\t@Watch('room', { deep: true })\r\n\t\tprivate clearErrors() {\r\n\t\t\tif (this.dirty) {\r\n\t\t\t\tthis.valiate()\r\n\t\t\t}\r\n\t\t}\r\n\t\tpublic async save() {\r\n\t\t\tthis.dirty = true\r\n\t\t\tif (!this.valiate()) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tthis.saving = true\r\n\t\t\tif (this.mode === 'create') {\r\n\t\t\t\tthis.room = await createRoom(this.room)\r\n\t\t\t} else {\r\n\t\t\t\tthis.room = await editRoom(this.room.id, this.room)\r\n\t\t\t}\r\n\t\t\tthis.$router.push('/rooms')\r\n\t\t}\r\n\r\n\t\tpublic async remove() {\r\n\t\t\tthis.deleting = true\r\n\t\t\tawait deleteRoom(this.room.id)\r\n\t\t\tthis.$router.push('/rooms')\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"container\">\r\n\t\t<h2>\r\n\t\t\t<div v-if=\"mode === 'create'\">New Room</div>\r\n\t\t\t<div v-if=\"mode === 'edit'\">Room: {{ $route.params.id }}</div>\r\n\t\t\t<a v-if=\"mode === 'edit'\" class=\"btn red\" @click=\"remove\">{{ deleting ? '...' : 'Delete' }}</a>\r\n\t\t</h2>\r\n\t\t<Loading v-if=\"loading\" />\r\n\t\t<div v-if=\"!loading\">\r\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\r\n\t\t\t\t<label>ID</label>\r\n\t\t\t\t<input type=\"text\" disabled :value=\"room.id\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\" v-if=\"mode === 'edit'\">\r\n\t\t\t\t<label>Created</label>\r\n\t\t\t\t<input type=\"text\" disabled :value=\"room.created\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Category</label>\r\n\t\t\t\t<select v-model=\"room.category\">\r\n\t\t\t\t\t<option v-for=\"(category, value) in categories\" :value=\"value\" :key=\"value\">\r\n\t\t\t\t\t\t{{ category }}\r\n\t\t\t\t\t</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Number</label>\r\n\t\t\t\t<input type=\"number\" v-model=\"room.number\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Floor</label>\r\n\t\t\t\t<input type=\"number\" v-model=\"room.floor\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Available</label>\r\n\t\t\t\t<CheckBox v-model=\"room.available\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Price</label>\r\n\t\t\t\t<input type=\"number\" v-model=\"room.price\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"field\">\r\n\t\t\t\t<label>Features <small>(Hold Ctrl / âŒ˜ to select multiple)</small></label>\r\n\t\t\t\t<select v-model=\"room.features\" multiple>\r\n\t\t\t\t\t<option v-for=\"(feature, value) in features\" :value=\"value\" :key=\"value\">\r\n\t\t\t\t\t\t{{ feature }}\r\n\t\t\t\t\t</option>\r\n\t\t\t\t</select>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div class=\"error\" v-for=\"(error, i) in errors\" :key=\"i\">{{ error }}</div>\r\n\t\t<div class=\"actions\">\r\n\t\t\t<router-link class=\"btn\" to=\"/rooms\">Back</router-link>\r\n\t\t\t<a class=\"btn blue\" @click=\"save\">{{ saving ? '...' : 'Save' }}</a>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n\th2 {\r\n\t\tposition: relative;\r\n\t\ta {\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 0;\r\n\t\t\tright: 0;\r\n\t\t}\r\n\t}\r\n\t.actions {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t}\r\n</style>\r\n"]}]}